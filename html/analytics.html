<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analytics â€” SAMELCO II</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,500;0,600;1,500&family=Outfit:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,600;1,500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/styles.css">
  <script src="../js/supabase-config.js"></script>
  <script src="../js/municipalities-data.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
</head>
<body class="page-analytics">
  <div class="bg-image" aria-hidden="true"></div>
  <div class="noise"></div>
  <div class="orb orb-1"></div>

  <nav class="nav">
    <div class="nav-inner">
      <a href="index.html" class="nav-logo">
        <span class="nav-logo-icon" aria-hidden="true">
          <img src="../assets/images/logo.png" alt="SAMELCO II logo" class="nav-logo-img">
        </span>
        <span class="nav-logo-text">
          <span class="nav-logo-title">SAMELCO II</span>
          <span class="nav-logo-sub">SAMAR ELECTRIC COOPERATIVE, INC.</span>
        </span>
      </a>
      <div class="nav-right">
        <div class="branch-nav-wrap" style="position:relative;">
          <button type="button" class="branch-nav-btn" id="branches-btn">Branches</button>
          <div id="branch-dropdown" class="branch-dropdown">
            <button class="branch-option" data-branch="Paranas Main Office">Paranas Main Office</button>
            <button class="branch-option" data-branch="Catbalogan Branch Office">Catbalogan Branch Office</button>
            <button class="branch-option" data-branch="Villareal Branch">Villareal Branch</button>
            <button class="branch-option" data-branch="Basey Branch Office">Basey Branch Office</button>
          </div>
        </div>
        <div class="nav-dots-wrap">
          <button type="button" class="nav-dots-trigger" aria-label="Menu" aria-expanded="false" aria-haspopup="true" id="nav-dots-btn">
            <span class="nav-dots-icon">&#9776;</span>
          </button>
          <div class="nav-dots-dropdown" id="nav-dots-dropdown">
           <button type="button" class="nav-dots-item" data-action="home">Home</button>
            <button type="button" class="nav-dots-item" data-action="records">Records</button>
            <button type="button" class="nav-dots-item" data-action="analytics">Analytics</button>
            <button type="button" class="nav-dots-item" data-action="etc">About</button>
            <button type="button" class="nav-dots-item" data-action="etc">Contact</button>
          </div>
        </div>
        <a href="report.html" class="nav-btn nav-btn-report">Report Issue</a>
        <span class="nav-user-welcome">Welcome, <span id="user-name">User</span></span>
        <button type="button" class="nav-btn nav-btn-cta" id="logout-btn">Logout</button>
      </div>
    </div>
  </nav>

  <section class="analytics-section">
    <div class="analytics-container">
      <div class="analytics-header">
        <h1 class="analytics-title">Analytics</h1>
        <p class="analytics-subtitle">Insights and statistics for SAMELCO II operations</p>
      </div>

      <!-- Summary Cards -->
      <div class="analytics-grid" style="margin-top: 2rem;">
        <div class="analytics-card">
          <h3 class="analytics-card-title">Active Problems</h3>
          <div class="analytics-stat" id="active-problems-count">0</div>
          <p class="analytics-card-subtitle">Current issues requiring attention</p>
        </div>
        <div class="analytics-card">
          <h3 class="analytics-card-title">Restored Services</h3>
          <div class="analytics-stat" id="restored-services-count">0</div>
          <p class="analytics-card-subtitle">Recently resolved issues</p>
        </div>
        <div class="analytics-card">
          <h3 class="analytics-card-title">Total Records</h3>
          <div class="analytics-stat" id="total-records-count">0</div>
          <p class="analytics-card-subtitle">Consumer records in system</p>
        </div>
      </div>

      <div class="two-charts-row" style="display:flex; gap:2rem; justify-content:center; margin-top:2.5rem; flex-wrap:wrap;">
        <div class="records-chart-wrap" style="flex:1 1 300px; max-width:400px;">
          <h2 class="records-table-title">Branch Status Distribution</h2>
          <canvas id="branch-status-pie-chart"></canvas>
        </div>
        <div class="records-chart-wrap" style="flex:1 1 400px; max-width:500px;">
          <h2 class="records-table-title">Branch Issues Comparison</h2>
          <canvas id="branch-comparison-bar-chart"></canvas>
        </div>
      </div>
            </div>
          </div>
        </div>
      </div>
      
      </div>
    </div>
  </section>

  <script src="../js/analytics.js"></script>
</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Records ‚Äî SAMELCO II</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,500;0,600;1,500&family=Outfit:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,600;1,500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/styles.css">
</head>
<body class="page-records">
  <div class="bg-image" aria-hidden="true"></div>
  <div class="noise"></div>
  <div class="orb orb-1"></div>
  <nav class="nav">
    <div class="nav-inner">
      <a href="index.html" class="nav-logo">
        <span class="nav-logo-icon" aria-hidden="true">
          <img src="../assets/images/logo.png" alt="SAMELCO II logo" class="nav-logo-img">
        </span>
        <span class="nav-logo-text">
          <span class="nav-logo-title">SAMELCO II</span>
          <span class="nav-logo-sub">SAMAR ELECTRIC COOPERATIVE, INC.</span>
        </span>
      </a>
      <div class="nav-right">
        <div class="branch-nav-wrap" style="position:relative;">
          <button type="button" class="branch-nav-btn" id="branches-btn">Branches</button>
          <div id="branch-dropdown" class="branch-dropdown">
            <button class="branch-option" data-branch="Paranas Main Office">Paranas Main Office</button>
            <button class="branch-option" data-branch="Catbalogan Branch Office">Catbalogan Branch Office</button>
            <button class="branch-option" data-branch="Villareal Branch">Villareal Branch</button>
            <button class="branch-option" data-branch="Basey Branch Office">Basey Branch Office</button>
          </div>
        </div>
        <div class="nav-dots-wrap">
          <button type="button" class="nav-dots-trigger" aria-label="Menu" aria-expanded="false" aria-haspopup="true" id="nav-dots-btn">
            <span class="nav-dots-icon">&#9776;</span>
          </button>
          <div class="nav-dots-dropdown" id="nav-dots-dropdown">
           <button type="button" class="nav-dots-item" data-action="home">Home</button>
            <button type="button" class="nav-dots-item" data-action="records">Records</button>
            <button type="button" class="nav-dots-item" data-action="analytics">Analytics</button>
            <button type="button" class="nav-dots-item" data-action="about">About</button>
            <button type="button" class="nav-dots-item" data-action="contact">Contact</button>
          </div>
        </div>
        <a href="report.html" class="nav-btn nav-btn-report">Report Issue</a>
        <span class="nav-user-welcome">Welcome, <span id="user-name">User</span></span>
        <button type="button" class="nav-btn nav-btn-cta" id="logout-btn">Logout</button>
      </div>
    </div>
  </nav>

  <section class="records-section">
    <div class="records-container">
      <div class="records-header">
        <h1 class="records-title">Records</h1>
        <p class="records-subtitle">Manage and view SAMELCO II records and data</p>
        <div class="records-total">Total Reports Submitted: <span id="total-reports-count">0</span></div>
      </div>
      <div class="records-table-wrap creative-records-wrap" style="margin-top: 2.5rem;">
        <div class="records-table-header-controls">
          <div class="records-table-title-group">
            <h2 class="records-table-title">Consumer Records</h2>
            <div class="records-table-badge">Live Updates Enabled</div>
          </div>
          <div class="records-table-actions">
            <div class="search-box">
              <span class="search-icon">üîç</span>
              <input type="text" id="records-filter" class="records-filter-input" placeholder="Search records...">
            </div>
            <div class="select-wrapper">
              <select id="mun-filter" class="records-status-filter" title="Filter by municipality">
                <option value="all">All Municipalities</option>
              </select>
            </div>
            <div class="filter-group">
              <input type="date" id="records-date" class="records-filter-input date-input" title="Show only this date">
              <div class="select-wrapper">
                <select id="status-filter" class="records-status-filter">
                  <option value="all">All Statuses</option>
                  <option value="problems">Issues Only</option>
                  <option value="restored">Restored Only</option>
                </select>
              </div>
            </div>
            <div class="records-quick-badges" style="display:flex; gap:0.5rem; align-items:center;">
              <button type="button" id="badge-new" class="records-table-badge" style="cursor:pointer;">New Compliance <span id="badge-new-count">0</span></button>
              <button type="button" id="badge-pending" class="records-table-badge" style="cursor:pointer;">Pending <span id="badge-pending-count">0</span></button>
            </div>
            <button type="button" id="reset-restored-btn" class="records-export-btn" title="Clear all restored markers">Reset Restored</button>
            <button type="button" id="export-excel-btn" class="records-export-btn">
              <span class="btn-icon">üì•</span> Export Excel
            </button>
          </div>
        </div>
        <div class="records-table-container">
          <div class="records-table" id="consumer-records-table">
            <div class="records-table-header">
              <span class="col-date">Date</span>
              <span class="col-contact">Account No.</span>
              <span class="col-name">Name</span>
              <span class="col-address">Address</span>
              <span class="col-status">Issue</span>
                <span class="col-assigned">Assigned</span>
              <span class="col-restored">Status</span>
            </div>
            <!-- consumer rows will be populated dynamically by records.js -->
          </div>
        </div>
      </div>
    </div>
  </section>

  <div id="record-modal" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="close-modal" id="close-record-modal">&times;</span>
      <h2 id="modal-title">Record Details</h2>
      <ul class="info-list" id="modal-info-list"></ul>
      <div style="margin-top:1rem; display:flex; gap:0.5rem;">
        <button type="button" class="records-export-btn" id="copy-address-btn">Copy Address</button>
      </div>
    </div>
  </div>

  <script src="../js/supabase-config.js"></script>
  <script src="../js/records.js"></script>
</body>
</html>
